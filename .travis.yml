language: bash
sudo: required

notifications:
  email: false

before_install:
  - chmod +x mvnw

branches:
  only:
    - master
matrix:
  include:
    - env: TARGET=client
    - env: TARGET=auth-service
    - env: TARGET=products-service

script: if ./devops/scripts/build-condition.sh $TRAVIS_COMMIT_RANGE $TARGET; then echo "$TARGET is being built" && cd $TARGET && npm install && npm run test; else echo "$TARGET is NOT being built"; fi
